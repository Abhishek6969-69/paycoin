(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[688],{2820:function(e,l,a){Promise.resolve().then(a.bind(a,2273))},2273:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return u}});var r=a(7437),s=a(2265),t=a(8028),i=a(3145),n=a(6645);function d(e){let{userData:l,onClose:a,onProfileUpdate:d}=e,{data:o}=(0,t.useSession)(),[c,u]=(0,s.useState)(null),[x,m]=(0,s.useState)(!1),h=async()=>{if(!c){alert("Please select an image to upload!");return}m(!0);try{var e;let l=new FormData;l.append("image",c),l.append("userId",String((null==o?void 0:null===(e=o.user)||void 0===e?void 0:e.id)||""));let r=await fetch("/api/upload",{method:"POST",body:l}),s=await r.json();r.ok?(d(s.imageUrl),alert("Image uploaded successfully!"),a()):(console.error("Upload failed:",s.error),alert("Upload failed: "+(s.error||"Unknown error")))}catch(e){console.error("Upload error:",e),alert("An error occurred during upload")}finally{m(!1)}};return(0,r.jsxs)("div",{className:"space-y-6 bg-[#121212] p-6 rounded-lg shadow-md border border-gray-700",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(null==l?void 0:l.profileImage)?(0,r.jsx)(i.default,{className:"w-[100px] h-[100px] rounded-full object-cover border-2 border-gray-500",src:l.profileImage,width:100,height:100,alt:"User Photo"}):(0,r.jsx)("div",{className:"w-[100px] h-[100px] rounded-full bg-gray-800 flex items-center justify-center border border-gray-600",children:(0,r.jsx)("span",{className:"text-4xl text-gray-500",children:"\uD83D\uDC64"})}),(0,r.jsxs)("label",{className:"mt-4 cursor-pointer",children:[(0,r.jsx)("div",{className:"bg-gray-700 text-gray-200 hover:bg-gray-600 px-4 py-2 rounded-md text-sm font-medium transition-all",children:"Choose Photo"}),(0,r.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{var l;let a=null===(l=e.target.files)||void 0===l?void 0:l[0];a&&u(a)}})]}),c&&(0,r.jsxs)("p",{className:"mt-2 text-sm text-gray-400",children:["Selected: ",c.name]})]}),(0,r.jsxs)("div",{className:"flex  ml-10 space-x-2",children:[(0,r.jsx)(n.z,{type:"button",onClick:a,className:"bg-gray-700 hover:bg-gray-600 text-gray-200 border border-gray-500",children:"Cancel"}),(0,r.jsx)(n.z,{onClick:h,type:"submit",className:"bg-blue-600 hover:bg-blue-500 text-white border border-blue-500",children:x?"Uploading...":"Upload Photo"})]})]})}var o=a(9628),c=a(4258);function u(){var e;let[l,a]=(0,s.useState)(null),[u,x]=(0,s.useState)(!1),[m,h]=(0,s.useState)(!0),{data:f}=(0,t.useSession)();(0,s.useEffect)(()=>{!async function(){try{h(!0);let e=await (0,c.Z)();a(e)}catch(e){console.error("Error fetching user data:",e)}finally{h(!1)}}()},[]);let p=()=>x(!1);return m?(0,r.jsx)("div",{className:"max-w-4xl mx-auto p-6 flex justify-center items-center min-h-[60vh]",children:(0,r.jsxs)("div",{className:"animate-pulse flex flex-col items-center",children:[(0,r.jsx)("div",{className:"rounded-full bg-gray-200 h-32 w-32 mb-4"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-48 mb-4"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-64"})]})}):(0,r.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[u&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-card rounded-lg p-6 w-full max-w-md",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Edit Profile"}),(0,r.jsx)("button",{onClick:p,className:"text-gray-500 hover:text-gray-700","aria-label":"Close",children:"âœ•"})]}),(0,r.jsx)(d,{onClose:p,userData:l,onProfileUpdate:e=>{a(l=>({...l,profileImage:e}))}})]})}),(0,r.jsx)(o.Z,{title:"User Profile",className:"w-full md:w-[600px] mx-auto mt-8 p-8 shadow-lg hover:shadow-xl transition-shadow duration-300",children:(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(null==l?void 0:l.profileImage)?(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)(i.default,{className:"rounded-full w-[200px] h-[200px] border-4 border-primary/20 hover:border-primary/60 transition-all duration-300 shadow-lg",src:l.profileImage,alt:"User profile",width:200,height:200,priority:!0}),(0,r.jsx)("div",{className:"absolute inset-0 rounded-full bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}):(0,r.jsx)("div",{className:"w-[200px] h-[200px] rounded-full bg-gray-200 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-4xl text-gray-400",children:"\uD83D\uDC64"})}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)(n.z,{onClick:()=>x(!0),className:"px-6",type:"submit",children:"Edit Profile"})})]}),(0,r.jsxs)("div",{className:"space-y-6 px-4",children:[(0,r.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,r.jsx)("label",{className:"text-sm text-muted-foreground uppercase tracking-wider",children:"Name"}),(0,r.jsx)("h1",{className:"text-2xl font-semibold",children:(null==l?void 0:l.name)||"User"})]}),(0,r.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,r.jsx)("label",{className:"text-sm text-muted-foreground uppercase tracking-wider",children:"Email"}),(0,r.jsx)("h1",{className:"text-2xl font-semibold",children:(null==l?void 0:l.email)||(null==f?void 0:null===(e=f.user)||void 0===e?void 0:e.email)||"N/A"})]})]})]})})]})}},4258:function(e,l,a){"use strict";a(3079);var r=a(2119);l.Z=(0,r.$)("b50eb04b0437b30a11f925bfa8d45272dd05b272")},6645:function(e,l,a){"use strict";a.d(l,{z:function(){return s}});var r=a(7437);let s=e=>{let{onClick:l,children:a,className:s,type:t}=e;return(0,r.jsx)("button",{className:"bg-blue-500 text-white hover:bg-blue-600\n    ".concat(s," text-black font-semibold py-2 px-4 rounded-lg transition-all duration-300 \n    "),onClick:l,type:t,children:a})}},9628:function(e,l,a){"use strict";a.d(l,{Z:function(){return s}});var r=a(7437);function s(e){let{title:l,children:a,className:s}=e;return(0,r.jsxs)("div",{className:" p-4 rounded bg-gradient-to-br from-[#20263D] via-[#2A3152] to-[#383F6B]\n text-white\n\n\n mx-4 ".concat(s),children:[(0,r.jsx)("h1",{className:"text-xl border-b   pb-2",children:l}),(0,r.jsx)("div",{children:a})]})}}},function(e){e.O(0,[28,158,971,117,744],function(){return e(e.s=2820)}),_N_E=e.O()}]);