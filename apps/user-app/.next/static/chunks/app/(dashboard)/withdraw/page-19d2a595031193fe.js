(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6],{8486:function(e,t,r){Promise.resolve().then(r.bind(r,2884))},2884:function(e,t,r){"use strict";r.d(t,{default:function(){return m}});var a=r(7437),n=r(2265),s=r(8028),l=r(9628),i=r(6365),o=r(6645),c=r(9255),d=r(1675),u=r(4562);function m(){var e,t,r;let m=(0,s.useSession)(),[b,f]=(0,n.useState)(0),x=[{name:"HDFC",redirecturl:"https://netbanking.hdfcbank.com/netbanking/"},{name:"KOTAK",redirecturl:"https://netbanking.kotak.com/knb2/"},{name:"State Bank of India",redirecturl:"https://netbanking.kotak.com/knb2/"}],[h,g]=(0,n.useState)(null===(e=x[0])||void 0===e?void 0:e.redirecturl),[y,p]=(0,n.useState)(""),[v,w]=(0,n.useState)(""),[j,N]=(0,n.useState)((null===(t=x[0])||void 0===t?void 0:t.name)||"");(0,n.useEffect)(()=>{var e;let t=async()=>{try{let e=await fetch("/api/user/balance");if(e.ok){let t=await e.json();f(t.balance||0)}}catch(e){console.error("Error fetching balance:",e)}};(null===(e=m.data)||void 0===e?void 0:e.user)&&t()},[null===(r=m.data)||void 0===r?void 0:r.user]);let k=async()=>{if(!y||!j){u.Am.error("Please fill in all fields!");return}let e=Number(y);if(!y||isNaN(e)||e<=0){u.Am.error("Please fill in valid positive value!");return}if(100*e>b){u.Am.error("Insufficient balance! Please enter a lower amount.");return}let t=u.Am.loading("Processing your request...");try{let e=await fetch("/api/withdraw/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:y,provider:j})});if(!e.ok)throw Error("Failed to create withdraw transaction");let r=await e.json();r.redirectUrl&&(u.Am.dismiss(t),u.Am.success("Redirecting to bank server for withdrawal approval..."),window.location.href=r.redirectUrl)}catch(e){u.Am.dismiss(t),u.Am.error("An error occurred. Please try again."),console.error("Withdraw failed:",e)}};return(0,a.jsx)("div",{className:"w-full min-h-screen bg-gray-50 p-6",children:(0,a.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Cash Out"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:"Transfer money from your wallet to your bank account"})]}),(0,a.jsx)(l.Z,{title:"Withdraw to Bank",className:"bg-white border border-gray-200 shadow-sm",children:(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-blue-800",children:"Available Balance:"}),(0,a.jsxs)("span",{className:"text-lg font-bold text-blue-900",children:["₹",Math.max(0,b/100).toFixed(2)]})]})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c._,{label:"Amount",className:"text-sm font-medium text-gray-700"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:"₹"}),(0,a.jsx)(i.Z,{placeholder:"Enter amount to withdraw",type:"number",className:"w-full pl-8 bg-white border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-500/20 rounded-lg transition-all",onChange:e=>p(e)})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c._,{label:"Select Bank",className:"text-sm font-medium text-gray-700"}),(0,a.jsx)(d.Z,{onselect:e=>{let t=x.find(t=>t.name===e);g((null==t?void 0:t.redirecturl)||""),N((null==t?void 0:t.name)||"")},options:x.map(e=>({key:e.name,value:e.name}))})]}),(0,a.jsx)(o.z,{variant:"secondary",size:"lg",className:"w-full",onClick:k,children:"Withdraw to Bank"}),(0,a.jsx)("div",{className:"text-center text-xs text-gray-500 mt-4 p-3 bg-amber-50 rounded-lg border border-amber-200",children:(0,a.jsx)("p",{children:"⚠️ Funds will be transferred to your selected bank account"})})]})})]})})}},6365:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var a=r(7437);function n(e){let{placeholder:t,onChange:r,type:n,className:s,maxlength:l}=e;return(0,a.jsx)("div",{className:" ",children:(0,a.jsx)("input",{maxLength:l,className:"border  px-4 py-2  rounded    ".concat(s),type:n,placeholder:t,onChange:e=>r(e.target.value)})})}r(2265)},6645:function(e,t,r){"use strict";r.d(t,{z:function(){return n}});var a=r(7437);let n=e=>{let{onClick:t,children:r,className:n="",type:s="button",variant:l="primary",size:i="md",disabled:o=!1,loading:c=!1}=e;return(0,a.jsxs)("button",{className:"".concat("font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center justify-center"," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2.5 text-sm",lg:"px-6 py-3 text-base"}[i]," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 shadow-sm",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 focus:ring-gray-500 border border-gray-200",outline:"border border-blue-600 text-blue-600 hover:bg-blue-50 focus:ring-blue-500",ghost:"text-gray-600 hover:text-gray-900 hover:bg-gray-100 focus:ring-gray-500"}[l]," ").concat(n),onClick:t,type:s,disabled:o||c,children:[c&&(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r]})}},9628:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var a=r(7437);function n(e){let{title:t,children:r,className:n}=e;return(0,a.jsxs)("div",{className:"rounded-lg bg-white text-gray-900 ".concat(n),children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:t})}),(0,a.jsx)("div",{children:r})]})}},9255:function(e,t,r){"use strict";r.d(t,{_:function(){return n}});var a=r(7437);function n(e){let{label:t,className:r}=e;return(0,a.jsx)("label",{className:"block ml-2  mt-2 mb-1   ".concat(r),children:t})}r(2265)},1675:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var a=r(7437);function n(e){let{onselect:t,options:r,className:n}=e;return(0,a.jsx)("div",{className:"w-full ".concat(n),children:(0,a.jsx)("select",{className:"w-full text-gray-500 px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:e=>{t(e.target.value)},children:r.map(e=>(0,a.jsx)("option",{value:e.key,children:e.value},e.key))})})}}},function(e){e.O(0,[28,562,971,117,744],function(){return e(e.s=8486)}),_N_E=e.O()}]);