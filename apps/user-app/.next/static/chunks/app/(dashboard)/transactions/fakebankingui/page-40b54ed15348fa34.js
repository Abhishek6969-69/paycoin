(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[338],{6772:function(e,r,s){Promise.resolve().then(s.bind(s,1391))},1391:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return m}});var t=s(7437),n=s(9628),a=s(8028),o=s(9376),i=s(2265),l=s(3060);s(3079);var c=(0,s(2119).$)("0e0c44f25bbccc0a534b370dd262a98c8600693d"),d=s(6645),x=s(4562),m=()=>{var e,r;let[s,m]=(0,i.useState)(null),[h,u]=(0,i.useState)(null),g=(0,o.useRouter)(),b=(0,a.useSession)();if((0,i.useEffect)(()=>{(async()=>{try{let e=await l.Z.get("".concat("http://localhost:3004","/transactions"));m(e.data)}catch(e){console.error("Error fetching transaction:",e)}})(),u(new URLSearchParams(window.location.search).get("token"))},[]),!s||!h||!s[h])return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 p-8",children:[(0,t.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200 fixed top-0 left-0 right-0 z-10",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-red-600 to-red-700 rounded-xl flex items-center justify-center shadow-lg",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-6 h-6 text-white",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:"CoinPay Bank"}),(0,t.jsx)("p",{className:"text-sm text-red-500",children:"Transaction Error"})]})]})})}),(0,t.jsx)("div",{className:"pt-24 flex items-center justify-center min-h-screen",children:(0,t.jsx)("div",{className:"w-full max-w-md",children:(0,t.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-red-200 overflow-hidden",children:(0,t.jsxs)("div",{className:"p-8 text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 15.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-red-700 mb-3",children:"Invalid Transaction"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:h?s?"Transaction not found in our records":"Unable to load transaction data":"No transaction token found"}),(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,t.jsx)("p",{className:"text-red-800 text-sm",children:"This transaction may have expired or the link is invalid."})}),(0,t.jsx)("button",{onClick:()=>window.close(),className:"w-full py-3 px-6 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-xl transition-all duration-300",children:"Close Window"})]})})})})]});let{amount:f,user_identifier:v}=s[h],p=async()=>{let e=x.Am.loading("Processing your secure payment...");try{let t=await c({token:h,amount:f,user_identifier:v});if(x.Am.dismiss(e),t){var r,s;x.Am.success("Payment of ₹".concat(f," successfully processed!"),{description:"Funds added to ".concat(null===(s=b.data)||void 0===s?void 0:null===(r=s.user)||void 0===r?void 0:r.name,"'s wallet"),duration:5e3}),setTimeout(()=>{g.push("".concat("http://localhost:3000","/transactions"))},2e3)}else x.Am.error("Payment processing failed",{description:"Please try again or contact support if the issue persists.",duration:6e3})}catch(r){x.Am.dismiss(e),x.Am.error("Payment processing error",{description:"A technical error occurred. Please try again.",duration:6e3}),console.error("Payment confirmation failed:",r)}};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 p-8",children:[(0,t.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200 fixed top-0 left-0 right-0 z-10",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-lg",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-6 h-6 text-white",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0012 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75z"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:"CoinPay Bank"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Payment Processing"})]})]})})})}),(0,t.jsx)("div",{className:"pt-24 flex items-center justify-center min-h-screen",children:(0,t.jsx)("div",{className:"w-full max-w-lg",children:(0,t.jsx)(n.Z,{title:"",className:"bg-white border border-gray-200 shadow-2xl rounded-2xl overflow-hidden",children:(0,t.jsxs)("div",{className:"p-10",children:[(0,t.jsxs)("div",{className:"text-center mb-10",children:[(0,t.jsx)("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-50 to-blue-100 rounded-3xl flex items-center justify-center mx-auto mb-6 border border-blue-200 shadow-sm",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Payment Confirmation"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Please review and confirm your secure transaction"})]}),(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-2xl p-8 mb-10",children:(0,t.jsxs)("div",{className:"text-center space-y-3",children:[(0,t.jsx)("p",{className:"text-blue-700 font-semibold",children:"Transaction Amount"}),(0,t.jsxs)("p",{className:"text-4xl font-bold text-blue-900",children:["₹",f]}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-3 text-blue-600",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})}),(0,t.jsxs)("span",{className:"font-medium",children:[null===(r=b.data)||void 0===r?void 0:null===(e=r.user)||void 0===e?void 0:e.name,"'s CoinPay Wallet"]})]})]})}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(d.z,{variant:"primary",onClick:p,className:"w-full py-5 text-xl font-bold rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02]",children:"Confirm Secure Payment"}),(0,t.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 text-green-700",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),(0,t.jsx)("p",{className:"text-sm font-semibold",children:"Secured with bank-grade encryption"})]})})]})]})})})})]})}},6645:function(e,r,s){"use strict";s.d(r,{z:function(){return n}});var t=s(7437);let n=e=>{let{onClick:r,children:s,className:n="",type:a="button",variant:o="primary",size:i="md",disabled:l=!1,loading:c=!1}=e;return(0,t.jsxs)("button",{className:"".concat("font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center justify-center"," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2.5 text-sm",lg:"px-6 py-3 text-base"}[i]," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 shadow-sm",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 focus:ring-gray-500 border border-gray-200",outline:"border border-blue-600 text-blue-600 hover:bg-blue-50 focus:ring-blue-500",ghost:"text-gray-600 hover:text-gray-900 hover:bg-gray-100 focus:ring-gray-500"}[o]," ").concat(n),onClick:r,type:a,disabled:l||c,children:[c&&(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s]})}},9628:function(e,r,s){"use strict";s.d(r,{Z:function(){return n}});var t=s(7437);function n(e){let{title:r,children:s,className:n}=e;return(0,t.jsxs)("div",{className:"rounded-lg bg-white text-gray-900 ".concat(n),children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:r})}),(0,t.jsx)("div",{children:s})]})}}},function(e){e.O(0,[28,562,965,971,117,744],function(){return e(e.s=6772)}),_N_E=e.O()}]);