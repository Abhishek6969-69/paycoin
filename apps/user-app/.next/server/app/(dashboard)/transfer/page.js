(()=>{var e={};e.id=25,e.ids=[25],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},55315:e=>{"use strict";e.exports=require("path")},86624:e=>{"use strict";e.exports=require("querystring")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},38539:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o}),s(94826),s(68032),s(35866),s(94034);var t=s(23191),a=s(88716),n=s(37922),i=s.n(n),d=s(95231),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);s.d(r,l);let o=["",{children:["(dashboard)",{children:["transfer",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,94826)),"/Users/abhishekyadav/Desktop/coinpay/apps/user-app/app/(dashboard)/transfer/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,68032)),"/Users/abhishekyadav/Desktop/coinpay/apps/user-app/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,94034)),"/Users/abhishekyadav/Desktop/coinpay/apps/user-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/abhishekyadav/Desktop/coinpay/apps/user-app/app/(dashboard)/transfer/page.tsx"],u="/(dashboard)/transfer/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/transfer/page",pathname:"/transfer",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},69424:(e,r,s)=>{let t={"75e404fe7df6c781cc45324a5c3b1c37b8056474":()=>Promise.resolve().then(s.bind(s,18859)).then(e=>e.default)};async function a(e,...r){return(await t[e]()).apply(null,r)}e.exports={"75e404fe7df6c781cc45324a5c3b1c37b8056474":a.bind(null,"75e404fe7df6c781cc45324a5c3b1c37b8056474")}},83606:(e,r,s)=>{Promise.resolve().then(s.bind(s,29760))},29760:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>d});var t=s(10326),a=s(33431),n=s(17577);s(68298);var i=s(11695);function d(){let e=(0,i.useSession)(),[r,s]=(0,n.useState)([]);return t.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,t.jsxs)("div",{className:"max-w-5xl mx-auto space-y-8",children:[t.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-8",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-3",children:"Transfer History"}),t.jsx("p",{className:"text-lg text-gray-600",children:"Track all your peer-to-peer transactions"})]}),(0,t.jsxs)("div",{className:"hidden md:flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Total Transfers"}),t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:r.length})]}),t.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl flex items-center justify-center border border-blue-200",children:t.jsx("span",{className:"text-2xl",children:"\uD83D\uDCB8"})})]})]})}),t.jsx(a.Z,{title:"Recent Transfers",className:"w-full bg-white border border-gray-200 shadow-sm",children:(0,t.jsxs)("div",{className:"p-6",children:[t.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:r.length>0?t.jsx("div",{className:"space-y-4",children:r.map((r,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-100 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${Number(e?.data?.user?.id)===r.fromUserId?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:Number(e?.data?.user?.id)===r.fromUserId?"↗":"↙"}),(0,t.jsxs)("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:Number(e?.data?.user?.id)===r.fromUserId?"Sent Money":"Received Money"}),t.jsx("div",{className:"text-gray-500 text-xs",children:r.timestamp.toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[t.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium",children:"Success"}),(0,t.jsxs)("span",{className:`font-semibold ${Number(e?.data?.user?.id)===r.fromUserId?"text-red-600":"text-green-600"}`,children:[Number(e?.data?.user?.id)===r.fromUserId?"-":"+"," ₹",(r.amount/100).toFixed(2)]})]})]},r.id))}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),t.jsx("p",{className:"text-gray-500 font-medium",children:"No transfers yet"}),t.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Your P2P transfers will appear here"})]})}),r.length>0&&(0,t.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-100 text-center text-xs text-gray-500",children:["Showing ",r.length," transfer",1!==r.length?"s":""]})]})})]})})}},68298:(e,r,s)=>{"use strict";s.d(r,{Z:()=>t}),s(15424);let t=(0,s(46242).$)("75e404fe7df6c781cc45324a5c3b1c37b8056474")},94826:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});let t=(0,s(68570).createProxy)(String.raw`/Users/abhishekyadav/Desktop/coinpay/apps/user-app/app/(dashboard)/transfer/page.tsx#default`)},24259:(e,r,s)=>{"use strict";s.d(r,{L:()=>d});var t=s(16920),a=s(12495),n=s(40038),i=s.n(n);let d={providers:[(0,a.Z)({name:"Credentials",credentials:{name:{label:"Name",type:"text",placeholder:"your name",required:!0},phone:{label:"Phone number",type:"tel",maxlength:"10",placeholder:"1231231231",required:!0},password:{label:"Password",type:"password",required:!0}},async authorize(e){let r=await i().hash(e.password,10),s=await t.Z.user.findFirst({where:{number:e.phone}});if(s)return await i().compare(e.password,s.password)?{id:s.id.toString(),name:s.name,email:s.number}:null;try{let s=await t.Z.user.create({data:{name:e.name,number:e.phone,password:r}});return{id:s.id.toString(),name:s.name,email:s.number}}catch(e){await t.Z.$disconnect(),console.error(e)}return null}})],secret:process.env.JWT_SECRET||"secret",callbacks:{jwt:async({token:e,user:r})=>(r&&(e.name=r.name||e.name,e.email=r.email||e.email),e),async session({token:e,session:r}){r.user.id=e.sub,r.user.token=e.jti,r.user.name=e.name||r.user.name,r.user.email=e.email||r.user.email;try{await t.Z.balance.upsert({where:{userId:Number(r.user.id)},update:{},create:{userId:Number(r.user.id),amount:0,locked:0}})}catch(e){await t.Z.$disconnect()}finally{}return r}},pages:{signIn:"/user/signin"}}},18859:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>d});var t=s(27745);s(26461);var a=s(16920),n=s(19031),i=s(24259);async function d(){try{let e=await (0,n.getServerSession)(i.L);if(!e?.user)return{status:401,data:{message:"Unauthorized"}};return{transfer:await a.Z.p2pTransfer.findMany({where:{OR:[{fromUserId:Number(e?.user?.id)},{toUserId:Number(e?.user?.id)}]}}),session:e}}finally{await a.Z.$disconnect()}}(0,s(85723).h)([d]),(0,t.j)("75e404fe7df6c781cc45324a5c3b1c37b8056474",d)},16920:(e,r,s)=>{"use strict";s.d(r,{Z:()=>a});var t=s(53524);let a=globalThis.prismaGlobal??new t.PrismaClient}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[948,865,621,43,197,207,40],()=>s(38539));module.exports=t})();