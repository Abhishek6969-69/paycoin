(()=>{var e={};e.id=688,e.ids=[688],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},55315:e=>{"use strict";e.exports=require("path")},86624:e=>{"use strict";e.exports=require("querystring")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},38037:(e,r,a)=>{"use strict";a.r(r),a.d(r,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),a(31826),a(68032),a(35866),a(94034);var s=a(23191),t=a(88716),l=a(37922),i=a.n(l),o=a(95231),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);a.d(r,n);let d=["",{children:["(dashboard)",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,31826)),"/Users/abhishekyadav/Desktop/coinpay/apps/user-app/app/(dashboard)/profile/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,68032)),"/Users/abhishekyadav/Desktop/coinpay/apps/user-app/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,94034)),"/Users/abhishekyadav/Desktop/coinpay/apps/user-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/abhishekyadav/Desktop/coinpay/apps/user-app/app/(dashboard)/profile/page.tsx"],u="/(dashboard)/profile/page",p={require:a,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/(dashboard)/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},40449:(e,r,a)=>{let s={b50eb04b0437b30a11f925bfa8d45272dd05b272:()=>Promise.resolve().then(a.bind(a,61281)).then(e=>e.default)};async function t(e,...r){return(await s[e]()).apply(null,r)}e.exports={b50eb04b0437b30a11f925bfa8d45272dd05b272:t.bind(null,"b50eb04b0437b30a11f925bfa8d45272dd05b272")}},88920:(e,r,a)=>{Promise.resolve().then(a.bind(a,75354))},75354:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>c});var s=a(10326),t=a(17577),l=a(11695),i=a(46226),o=a(554);function n({userData:e,onClose:r,onProfileUpdate:a}){let{data:n}=(0,l.useSession)(),[d,c]=(0,t.useState)(null),[u,p]=(0,t.useState)(!1),m=async()=>{if(!d){alert("Please select an image to upload!");return}p(!0);try{let e=new FormData;e.append("image",d),e.append("userId",String(n?.user?.id||""));let s=await fetch("/api/upload",{method:"POST",body:e}),t=await s.json();s.ok?(a(t.imageUrl),alert("Image uploaded successfully!"),r()):(console.error("Upload failed:",t.error),alert("Upload failed: "+(t.error||"Unknown error")))}catch(e){console.error("Upload error:",e),alert("An error occurred during upload")}finally{p(!1)}};return(0,s.jsxs)("div",{className:"space-y-6 bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[e?.profileImage?s.jsx(i.default,{className:"w-[100px] h-[100px] rounded-full object-cover border-2 border-gray-300",src:e.profileImage,width:100,height:100,alt:"User Photo"}):s.jsx("div",{className:"w-[100px] h-[100px] rounded-full bg-gray-100 flex items-center justify-center border border-gray-300",children:s.jsx("span",{className:"text-4xl text-gray-400",children:"\uD83D\uDC64"})}),(0,s.jsxs)("label",{className:"mt-4 cursor-pointer",children:[s.jsx("div",{className:"bg-gray-100 text-gray-700 hover:bg-gray-200 px-4 py-2 rounded-md text-sm font-medium transition-all border border-gray-300",children:"Choose Photo"}),s.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{let r=e.target.files?.[0];r&&c(r)}})]}),d&&(0,s.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",d.name]})]}),(0,s.jsxs)("div",{className:"flex justify-center space-x-3",children:[s.jsx(o.z,{variant:"secondary",onClick:r,children:"Cancel"}),s.jsx(o.z,{variant:"primary",onClick:m,disabled:u,children:u?"Uploading...":"Upload Photo"})]})]})}var d=a(33431);function c(){let[e,r]=(0,t.useState)(null),[a,c]=(0,t.useState)(!1),[u,p]=(0,t.useState)(!0),{data:m}=(0,l.useSession)(),x=()=>c(!1);return u?s.jsx("div",{className:"max-w-4xl mx-auto p-6 flex justify-center items-center min-h-[60vh]",children:(0,s.jsxs)("div",{className:"animate-pulse flex flex-col items-center",children:[s.jsx("div",{className:"rounded-full bg-gray-200 h-32 w-32 mb-4"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-48 mb-4"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-64"})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,s.jsxs)("div",{className:"max-w-5xl mx-auto space-y-8",children:[s.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-8",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-50 to-purple-100 rounded-3xl mx-auto mb-6 flex items-center justify-center border border-purple-200",children:s.jsx("span",{className:"text-3xl",children:"\uD83D\uDC64"})}),s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-3",children:"User Profile"}),s.jsx("p",{className:"text-lg text-gray-600",children:"Manage your account information and preferences"})]})}),a&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-lg",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit Profile"}),s.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600 p-2 rounded-full hover:bg-gray-100 transition-all","aria-label":"Close",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx(n,{onClose:x,userData:e,onProfileUpdate:e=>{r(r=>({...r,profileImage:e}))}})]})}),(0,s.jsxs)(d.Z,{title:"",className:"w-full max-w-4xl mx-auto bg-white shadow-lg rounded-2xl overflow-hidden border border-gray-200",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 p-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:"Profile Information"}),s.jsx("p",{className:"text-purple-100 mt-2",children:"Your personal account details"})]}),(0,s.jsxs)("div",{className:"p-8 space-y-8",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[e?.profileImage?(0,s.jsxs)("div",{className:"relative group",children:[s.jsx(i.default,{className:"rounded-full w-48 h-48 border-4 border-purple-200 shadow-2xl hover:shadow-3xl transition-all duration-300 object-cover",src:e.profileImage,alt:"User profile",width:192,height:192,priority:!0}),s.jsx("div",{className:"absolute inset-0 rounded-full bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:s.jsx("span",{className:"text-white font-semibold",children:"Click to edit"})})]}):s.jsx("div",{className:"w-48 h-48 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center border-4 border-gray-300 shadow-lg",children:s.jsx("span",{className:"text-6xl text-gray-400",children:"\uD83D\uDC64"})}),s.jsx("div",{className:"mt-8",children:s.jsx(o.z,{onClick:()=>c(!0),className:"px-8 py-3 text-lg font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",type:"submit",children:"Edit Profile"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 pt-8 border-t border-gray-200",children:[(0,s.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200",children:[s.jsx("label",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3 block",children:"Full Name"}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:e?.name||"User"})]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200",children:[s.jsx("label",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3 block",children:"Email Address"}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900 break-all",children:e?.email||m?.user?.email||"N/A"})]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200",children:[s.jsx("label",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3 block",children:"Phone Number"}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:e?.number||"Not provided"})]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200",children:[s.jsx("label",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3 block",children:"Account Status"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("h3",{className:"text-2xl font-bold text-green-600",children:"Active"})]})]})]})]})]})]})})}a(59611)},59611:(e,r,a)=>{"use strict";a.d(r,{Z:()=>s}),a(15424);let s=(0,a(46242).$)("b50eb04b0437b30a11f925bfa8d45272dd05b272")},31826:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>s});let s=(0,a(68570).createProxy)(String.raw`/Users/abhishekyadav/Desktop/coinpay/apps/user-app/app/(dashboard)/profile/page.tsx#default`)},24259:(e,r,a)=>{"use strict";a.d(r,{L:()=>o});var s=a(16920),t=a(12495),l=a(40038),i=a.n(l);let o={providers:[(0,t.Z)({name:"Credentials",credentials:{name:{label:"Name",type:"text",placeholder:"your name",required:!0},phone:{label:"Phone number",type:"tel",maxlength:"10",placeholder:"1231231231",required:!0},password:{label:"Password",type:"password",required:!0}},async authorize(e){let r=await i().hash(e.password,10),a=await s.Z.user.findFirst({where:{number:e.phone}});if(a)return await i().compare(e.password,a.password)?{id:a.id.toString(),name:a.name,email:a.number}:null;try{let a=await s.Z.user.create({data:{name:e.name,number:e.phone,password:r}});return{id:a.id.toString(),name:a.name,email:a.number}}catch(e){await s.Z.$disconnect(),console.error(e)}return null}})],secret:process.env.JWT_SECRET||"secret",callbacks:{jwt:async({token:e,user:r})=>(r&&(e.name=r.name||e.name,e.email=r.email||e.email),e),async session({token:e,session:r}){r.user.id=e.sub,r.user.token=e.jti,r.user.name=e.name||r.user.name,r.user.email=e.email||r.user.email;try{await s.Z.balance.upsert({where:{userId:Number(r.user.id)},update:{},create:{userId:Number(r.user.id),amount:0,locked:0}})}catch(e){await s.Z.$disconnect()}finally{}return r}},pages:{signIn:"/user/signin"}}},61281:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>o});var s=a(27745);a(26461);var t=a(16920),l=a(19031),i=a(24259);async function o(){let e=await (0,l.getServerSession)(i.L);return await t.Z.user.findUnique({where:{id:Number(e?.user?.id)}})}(0,a(85723).h)([o]),(0,s.j)("b50eb04b0437b30a11f925bfa8d45272dd05b272",o)},16920:(e,r,a)=>{"use strict";a.d(r,{Z:()=>t});var s=a(53524);let t=globalThis.prismaGlobal??new s.PrismaClient}};var r=require("../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),s=r.X(0,[948,865,621,43,197,207,226,40],()=>a(38037));module.exports=s})();